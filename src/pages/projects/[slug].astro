---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const projects = (await getCollection('projects')).map((p) => ({
    params: { slug: p.slug },
    props: { ...p.data, render: p.render },
  }));

  return projects;
}
import BaseLayout from '@/layouts/BaseLayout.astro';
const { props, params } = Astro;
const { Content } = await props.render();
const meetings = await Promise.all(
  (
    await getCollection(
      'meetings',
      (entry) => entry.data.project.slug === params.slug,
    )
  ).map(async (m) => {
    const { Content } = await m.render();
    return { ...m, Content };
  }),
);
---

<BaseLayout title={props.title}>
  <h1>{props.title}</h1>
  <p>{props.description}</p>
  <Content />
  {meetings.map((meeting) => (
    <h1>{meeting.data.title}</h1>
    <meeting.Content />
  ))}
</BaseLayout>
